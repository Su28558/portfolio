<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Feuerball Animation + Trail</title>

<style>
    body {
        height: 2000px;
        margin: 0;
        background: #111;
        color: white;
        font-family: sans-serif;
        padding-top: 100px;
        text-align: center;
    }

    #fireball {
        width: 120px;
        cursor: pointer;
        transition: transform 0.2s ease;
        filter: drop-shadow(0 0 10px #ffae00);
        position: relative;
        z-index: 10;
    }

    #fireball:hover {
        transform: scale(1.05);
    }

    /* Trail-Partikel */
    .trail {
        position: absolute;
        width: 80px;
        opacity: 0.8;
        pointer-events: none;
        filter: drop-shadow(0 0 15px #ff4d00) blur(3px);
        transform: translate(-50%, -50%);
        animation: fadeOut 0.4s linear forwards;
    }

    @keyframes fadeOut {
        0%   { opacity: 0.8; transform: scale(1) translate(-50%, -50%); }
        100% { opacity: 0; transform: scale(0.5) translate(-50%, -50%); }
    }

    /* Zielbereich zum Scrollen */
    #ziel {
        margin-top: 800px;
        padding: 80px;
        background: #222;
        border-radius: 10px;
    }
</style>
</head>

<body>

<h1>ðŸ”¥ Klick auf den Feuerball</h1>

<img id="fireball" src="https://upload.wikimedia.org/wikipedia/commons/5/57/Fireball_red.png" alt="Feuerball">

<div id="ziel">
    <h2>Zielbereich</h2>
    <p>Hier scrollt der Feuerball hin.</p>
</div>

<script>
(function() {
    const img = document.getElementById("fireball");
    let animating = false;

    /** Sanftes Scrollen */
    function smoothScrollTo(targetY, duration = 1200) {
        const startY = window.pageYOffset;
        const distance = targetY - startY;
        let startTime = null;

        function animationFrame(now) {
            if (!startTime) startTime = now;
            const progress = now - startTime;
            const percent = Math.min(progress / duration, 1);

            window.scrollTo(0, startY + distance * percent);

            if (progress < duration) {
                requestAnimationFrame(animationFrame);
            }
        }

        requestAnimationFrame(animationFrame);
    }

    /** Erstellt Funken-Trail */
    function createTrailParticle(x, y) {
        const particle = document.createElement("img");
        particle.src = img.src;
        particle.classList.add("trail");
        particle.style.left = x + "px";
        particle.style.top = y + "px";

        document.body.appendChild(particle);

        setTimeout(() => particle.remove(), 400);
    }

    /** Feuerball fliegt + erzeugt Trail */
    function flyOnce() {
        if (animating) return;
        animating = true;

        const startX = img.getBoundingClientRect().left + window.scrollX;
        const startY = img.getBoundingClientRect().top + window.scrollY;
        const endX = startX + 600;  

        const duration = 800;
        let startTime = null;

        function step(timestamp) {
            if (!startTime) startTime = timestamp;
            const progress = timestamp - startTime;
            const t = Math.min(progress / duration, 1);

            const currentX = startX + (endX - startX) * t;

            img.style.position = "absolute";
            img.style.left = currentX + "px";
            img.style.top = startY + "px";

            // Trail erzeugen
            createTrailParticle(currentX, startY);

            if (t < 1) {
                requestAnimationFrame(step);
            } else {
                // Reset Position
                img.style.position = "";
                img.style.left = "";
                img.style.top = "";
                animating = false;
            }
        }

        requestAnimationFrame(step);
    }

    const target = document.getElementById("ziel");

    img.addEventListener("click", () => {
        flyOnce();
        smoothScrollTo(target.offsetTop - 40, 1300);
    });
})();
</script>

</body>
</html>
